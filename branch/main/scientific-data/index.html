

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scientific Data &mdash; HPDA-Python  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/overrides.css?v=c88db32d" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=187304be"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=35a8b989"></script>
      <script src="../_static/minipres.js?v=a0d29692"></script>
      <script src="../_static/js/hoverxref.js"></script>
      <script src="../_static/js/tooltipster.bundle.min.js"></script>
      <script src="../_static/js/micromodal.min.js"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../_static/tabs.js?v=3030b3cb"></script>
      <script data-domain="enccs.github.io/hpda-python" defer="defer" src="https://plausible.io/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Efficient Array Computing" href="../stack/" />
    <link rel="prev" title="Motivation" href="../motivation/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            HPDA-Python
              <img src="../_static/ENCCS.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Preparation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/">Installation and LUMI Access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../motivation/">Motivation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scientific Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#types-of-scientific-data">Types of scientific data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bit-and-byte">Bit and Byte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#numerical-data">Numerical Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#text-data">Text Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata">Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-and-storage-format">Data and storage format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tabular-data-structure">Tabular data structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gridded-data-structure">Gridded data structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#an-overview-of-common-data-formats">An overview of common data formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#csv-comma-separated-values">CSV (comma-separated values)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hdf5-hierarchical-data-format-version-5">HDF5 (Hierarchical Data Format version 5)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#netcdf4-network-common-data-form-version-4">NetCDF4 (Network Common Data Form version 4)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#there-s-more">There’s more</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xarray">Xarray</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sharing-data">Sharing data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pros-and-cons-of-sharing-data-from-wikipedia">Pros and cons of sharing data (from Wikipedia)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fair-principles">FAIR principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#services-for-sharing-and-collaborating-on-research-data">Services for sharing and collaborating on research data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stack/">Efficient Array Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-computing/">Parallel Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimization/">Benchmarking, profiling and optimizing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance-boosting/">Performance Boosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dask/">Dask for Scalable Analytics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Optional material</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup-eurohpc/">Installation in EuroHPC Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas-extra/">Pandas (II)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GPU-computing/">GPU Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-computing_opt/">Parallel Computing (II)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimization_opt/">Benchmarking, profiling and optimizing (II)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dask_opt/">Dask (II)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor’s Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">HPDA-Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Scientific Data</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ENCCS/hpda-python/blob/main/content/scientific-data.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scientific-data">
<span id="id1"></span><h1>Scientific Data<a class="headerlink" href="#scientific-data" title="Link to this heading"></a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Get an overview of different formats for scientific data</p></li>
<li><p>Understand performance pitfalls when working with big data</p></li>
<li><p>Learn how to work with the NetCDF format through Xarray</p></li>
<li><p>Know the pros and cons of open science</p></li>
<li><p>Learn how to mint a DOI for your project or dataset</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>30 min teaching/type-along</p></li>
<li><p>30 min exercises</p></li>
</ul>
</div>
<section id="types-of-scientific-data">
<h2>Types of scientific data<a class="headerlink" href="#types-of-scientific-data" title="Link to this heading"></a></h2>
<section id="bit-and-byte">
<h3>Bit and Byte<a class="headerlink" href="#bit-and-byte" title="Link to this heading"></a></h3>
<p>The smallest building block of storage in the computer is a <strong>bit</strong>,
which stores either a 0 or 1.
Normally a number of 8 bits are combined in a group to make a <strong>byte</strong>.
One byte (8 bits) can represent/hold at most <span class="math notranslate nohighlight">\(2^8\)</span> distinct values.
Organising bytes in different ways can represent
different types of data.</p>
</section>
<section id="numerical-data">
<h3>Numerical Data<a class="headerlink" href="#numerical-data" title="Link to this heading"></a></h3>
<p>Different numerical data types (e.g. integer and floating-point numbers)
require different binary representation.
The more bytes we use for each value, the larger is the range or precision we get,
but more bytes require more memory.</p>
<p>For example, integers stored with 1 byte (8 bits) have a range from
[-128, 127], while with 2 bytes (16 bits) the range becomes [-32768, 32767].
Integers are whole numbers and can be represented exactly given enough bytes.
However, for floating-point numbers the decimal fractions
can not be represented exactly as binary (base 2) fractions in most cases
which is known as the <em>representation error</em>. Arithmetic operations will
further propagate this error. That is why in scientific computing,
numerical algorithms have to be carefully designed to not accumulate errors, and
floating-point numbers are usually allocated with 8 bytes
to make sure the inaccuracy is under control and does not lead to unsteady solutions.</p>
<div class="admonition-single-vs-double-precision discussion important admonition" id="discussion-0">
<p class="admonition-title">Single vs double precision</p>
<p>In many computational modeling domains, it is common practice to use single precision in
some parts of the modeling to achieve better performance at an affordable cost to the
accuracy. For example in climate simulations, molecular dynamics and machine learning.</p>
<p>Have you used single precision in your modeling? Did you observe higher performance?</p>
</div>
</section>
<section id="text-data">
<h3>Text Data<a class="headerlink" href="#text-data" title="Link to this heading"></a></h3>
<p>When it comes to text data, the simplest character encoding
is ASCII (American Standard Code for Information Interchange) and was the most
common character encodings until 2008 when UTF-8 took over.
The original ASCII uses only 7 bits for representing each character and
therefore encodes only 128 specified characters. Later it became common
to use an 8-bit byte to store each character in memory, providing an extended ASCII.</p>
<p>As computers became more powerful and the need for including more characters
from other alphabets, UTF-8 became
the most common encoding. UTF-8 uses a minimum of one byte and up to four bytes per character.</p>
</section>
<section id="metadata">
<h3>Metadata<a class="headerlink" href="#metadata" title="Link to this heading"></a></h3>
<p>Metadata consists of various information about the data, ranging from units to date/time, various
forms of identification, etc. While most scientific data is either numerical or text, the
associated metadata is tightly coupled to the field and different types of data may have
different metadata conventions.
In scientific use cases, such as simulation and experimental results, metadata are usually bundled
together with the data they refer to.</p>
<p>When it comes to data storage, there are many types of storage formats used
in scientific computing and data analysis. There isn’t one data storage format that
works in all cases, so choose a file format that best suits your data.</p>
</section>
<section id="data-and-storage-format">
<h3>Data and storage format<a class="headerlink" href="#data-and-storage-format" title="Link to this heading"></a></h3>
<p>The expression “Data format” can refer to two different concepts:</p>
<ul class="simple">
<li><p>The data structure, i.e. the topology of data in memory (e.g. a table, or
multi-dimensional tensor, a grid…)</p></li>
<li><p>The file format, i.e. how the data is saved on disk.</p></li>
</ul>
<section id="tabular-data-structure">
<h4>Tabular data structure<a class="headerlink" href="#tabular-data-structure" title="Link to this heading"></a></h4>
<p>A very common type of data is “tabular data”. Tabular data is structured
into rows and columns. Each column usually has a name and a specific data type
while each row is a distinct sample which provides data according to each column (including missing values).
The simplest way to save tabular data is using the so-called <em>CSV</em> (comma-separated values) file.</p>
</section>
<section id="gridded-data-structure">
<h4>Gridded data structure<a class="headerlink" href="#gridded-data-structure" title="Link to this heading"></a></h4>
<p>Gridded data is another very common data type in which numerical data is normally saved
in a multi-dimensional grid (array). Common field-agnostic array formats include:</p>
<ul class="simple">
<li><p>Hierarchical Data Format (HDF5) - Container for arrays with associated metadata</p></li>
<li><p>Network Common Data Form (NetCDF) - Nowadays based on HDF5, with a simpler API</p></li>
<li><p>Zarr - Cloud-optimised storage format that support parallel I/O and chunked arrays</p></li>
</ul>
</section>
<section id="an-overview-of-common-data-formats">
<h4>An overview of common data formats<a class="headerlink" href="#an-overview-of-common-data-formats" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">Name:</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Human</div>
<div class="line">readable:</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Space</div>
<div class="line">efficiency:</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Arbitrary</div>
<div class="line">data:</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Tidy</div>
<div class="line">data:</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Array</div>
<div class="line">data:</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Long term</div>
<div class="line">storage/sharing:</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="xref std std-ref">Pickle</span></p></td>
<td><p>❌</p></td>
<td><p>🟨</p></td>
<td><p>✅</p></td>
<td><p>🟨</p></td>
<td><p>🟨</p></td>
<td><p>❌</p></td>
</tr>
<tr class="row-odd"><td><p><span class="xref std std-ref">CSV</span></p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>🟨</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><span class="xref std std-ref">Feather</span></p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
</tr>
<tr class="row-odd"><td><p><span class="xref std std-ref">Parquet</span></p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>🟨</p></td>
<td><p>✅</p></td>
<td><p>🟨</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><span class="xref std std-ref">npy</span></p></td>
<td><p>❌</p></td>
<td><p>🟨</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
</tr>
<tr class="row-odd"><td><p><span class="xref std std-ref">HDF5</span></p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><span class="xref std std-ref">NetCDF4</span></p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><span class="xref std std-ref">JSON</span></p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td><p>🟨</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><span class="xref std std-ref">Excel</span></p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>🟨</p></td>
<td><p>❌</p></td>
<td><p>🟨</p></td>
</tr>
<tr class="row-odd"><td><p><span class="xref std std-ref">Graph formats</span></p></td>
<td><p>🟨</p></td>
<td><p>🟨</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Legend</p>
<ul class="simple">
<li><p>✅ : Good</p></li>
<li><p>🟨 : Ok / depends on a case</p></li>
<li><p>❌ : Bad</p></li>
</ul>
<p>Adapted from Aalto university’s <a class="reference external" href="https://aaltoscicomp.github.io/python-for-scicomp/work-with-data/#what-is-a-data-format">Python for scientific computing</a>.</p>
</div>
<p>Some of these formats (e.g. JSON and CSV) are saved as text files (ASCII), thus they are
human-readable. This makes them easier to visually check them (e.g. for format errors) and
are supported out of the box by many tools. However, they tend to be slower during I/O and
are not optimal for storage of floating point numbers, as they either require much larger
disk space or have to sacrifice precision to curb size.</p>
<p>Most storage-intensive data is saved in binary formats, which usually require specific libraries
(and possibly specific versions) to be read and cannot be inspected visually. However, they tend to
have much better performance during I/O and to save space when storing floating point numbers at full
precision. Moreover, embedding metadata is easier.</p>
<p>Most of the formats in the table are application- and language-agnostic. However, a couple are
Python-native: <a class="reference external" href="https://docs.python.org/3/library/pickle.html">Pickle</a>, which is used to serialise
any Python object, and <a class="reference external" href="https://numpy.org/devdocs/reference/generated/numpy.lib.format.html">npy</a>,
which is used to serialise Numpy arrays. Several Numpy arrays can be bundled in a single <em>npz</em> file.</p>
</section>
<section id="csv-comma-separated-values">
<h4>CSV (comma-separated values)<a class="headerlink" href="#csv-comma-separated-values" title="Link to this heading"></a></h4>
<div class="admonition-key-features admonition">
<p class="admonition-title">Key features</p>
<ul class="simple">
<li><p><strong>Type:</strong> Text format</p></li>
<li><p><strong>Packages needed:</strong> NumPy, Pandas</p></li>
<li><p><strong>Space efficiency:</strong> Bad</p></li>
<li><p><strong>Good for sharing/archival:</strong> Yes</p></li>
<li><dl class="simple">
<dt>Tidy data:</dt><dd><ul>
<li><p>Speed: Bad</p></li>
<li><p>Ease of use: Great</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Array data:</dt><dd><ul>
<li><p>Speed: Bad</p></li>
<li><p>Ease of use: Ok for one or two dimensional data. Bad for anything higher.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>Best use cases:</strong> Sharing data. Small data. Data that needs to be human-readable.</p></li>
</ul>
</div>
<p>CSV is a very popular file format, as it is human-readable and easily shareable.
However, it is not the best format to use when working with big (numerical) data.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When working with floating point numbers, you should be careful to save the data
with enough decimal places so that you won’t lose precision.</p>
<ol class="arabic simple">
<li><p>You may lose data precision simply because you do not save the data with enough decimals</p></li>
<li><p>CSV writing routines in Pandas and NumPy try to avoid such problems
by writing floating point numbers with enough precision, but they are not perfect.</p></li>
<li><p>Storage of high-precision CSV files is usually very inefficient storage-wise.</p></li>
<li><p>Binary files, where floating point numbers are represented in their native binary format,
do not suffer from these problems.</p></li>
</ol>
</div>
</section>
<section id="hdf5-hierarchical-data-format-version-5">
<h4>HDF5 (Hierarchical Data Format version 5)<a class="headerlink" href="#hdf5-hierarchical-data-format-version-5" title="Link to this heading"></a></h4>
<div class="admonition-key-features admonition">
<p class="admonition-title">Key features</p>
<ul class="simple">
<li><p><strong>Type:</strong> Binary format</p></li>
<li><p><strong>Packages needed:</strong> Pandas, PyTables, h5py, pyvista for meshes, domain-specific…</p></li>
<li><p><strong>Space efficiency:</strong> Good for numeric data.</p></li>
<li><p><strong>Good for sharing/archival:</strong> Yes, if datasets are named well.</p></li>
<li><dl class="simple">
<dt>Tidy data:</dt><dd><ul>
<li><p>Speed: Ok</p></li>
<li><p>Ease of use: Good</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Array data:</dt><dd><ul>
<li><p>Speed: Great</p></li>
<li><p>Ease of use: Good</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>Best use cases:</strong> Working with big datasets in array data format.</p></li>
</ul>
</div>
<p>HDF5 is a high performance storage format for storing large amounts of data in multiple datasets in a single file.
It is especially popular in fields where you need to store big multidimensional arrays such as physical sciences.</p>
</section>
<section id="netcdf4-network-common-data-form-version-4">
<h4>NetCDF4 (Network Common Data Form version 4)<a class="headerlink" href="#netcdf4-network-common-data-form-version-4" title="Link to this heading"></a></h4>
<div class="admonition-key-features admonition">
<p class="admonition-title">Key features</p>
<ul class="simple">
<li><p><strong>Type</strong>: Binary format</p></li>
<li><p><strong>Packages needed:</strong> Pandas, netCDF4/h5netcdf, xarray</p></li>
<li><p><strong>Space efficiency:</strong> Good for numeric data.</p></li>
<li><p><strong>Good for sharing/archival:</strong> Yes.</p></li>
<li><dl class="simple">
<dt>Tidy data:</dt><dd><ul>
<li><p>Speed: Ok</p></li>
<li><p>Ease of use: Good</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Array data:</dt><dd><ul>
<li><p>Speed: Good</p></li>
<li><p>Ease of use: Great</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>Best use cases:</strong> Working with big datasets in array data format. Especially useful if the dataset
contains spatial or temporal dimensions. Archiving or sharing those datasets.</p></li>
</ul>
</div>
<p>NetCDF4 is a data format built on top of HDF5, but exposes a simpler API with a more standardised structure.
NetCDF4 is one of the most used formats for storing large data from big simulations in physical sciences.</p>
</section>
<section id="there-s-more">
<h4>There’s more<a class="headerlink" href="#there-s-more" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://arrow.apache.org/docs/python/feather.html">Feather</a>: a portable file format
for storing Arrow tables or data frames (from languages like Python or R)</p></li>
<li><p><a class="reference external" href="https://arrow.apache.org/docs/python/parquet.html">Parquet</a>: a standardized open-source
columnar storage format for use in data analysis systems</p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/routines.io.html">npy</a>: numpy array format for
saving and loading numpy arrays.</p></li>
</ul>
</section>
<section id="xarray">
<h4>Xarray<a class="headerlink" href="#xarray" title="Link to this heading"></a></h4>
<p><a class="reference external" href="https://docs.xarray.dev/en/stable/">Xarray</a> is a Python package that builds on NumPy but adds <em>labels</em> to
multi-dimensional arrays. It also borrows heavily from the Pandas package for labelled tabular data and
integrates tightly with dask for parallel computing. NumPy, Pandas and Dask will be covered in later episodes.</p>
<p>Xarray is particularly tailored to working with NetCDF files. It reads and writes to NetCDF files using the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">open_dataset()</span></code> / <code class="xref py py-meth docutils literal notranslate"><span class="pre">open_dataarray()</span></code> functions and the <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_netcdf()</span></code> method. Explore these in the
exercise below!</p>
</section>
</section>
</section>
<section id="sharing-data">
<h2>Sharing data<a class="headerlink" href="#sharing-data" title="Link to this heading"></a></h2>
<p>The Open Science movement encourages researchers to share research output beyond the contents of a
published academic article (and possibly supplementary information).</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/Open_Science_Principles.png"><img alt="../_images/Open_Science_Principles.png" src="../_images/Open_Science_Principles.png" style="width: 632.0px; height: 288.0px;" />
</a>
</figure>
<section id="pros-and-cons-of-sharing-data-from-wikipedia">
<h3>Pros and cons of sharing data (<a class="reference external" href="https://en.wikipedia.org/wiki/Open_science">from Wikipedia</a>)<a class="headerlink" href="#pros-and-cons-of-sharing-data-from-wikipedia" title="Link to this heading"></a></h3>
<p>In favor:</p>
<ul class="simple">
<li><p>Open access publication of research reports and data allows for rigorous peer-review</p></li>
<li><p>Science is publicly funded so all results of the research should be publicly available</p></li>
<li><p>Open Science will make science more reproducible and transparent</p></li>
<li><p>Open Science has more impact</p></li>
<li><p>Open Science will help answer uniquely complex questions</p></li>
</ul>
<p>Against:</p>
<ul class="simple">
<li><p>Too much unsorted information overwhelms scientists</p></li>
<li><p>Potential misuse</p></li>
<li><p>The public will misunderstand science data</p></li>
<li><p>Increasing the scale of science will make verification of any discovery more difficult</p></li>
<li><p>Low-quality science</p></li>
</ul>
</section>
<section id="fair-principles">
<h3>FAIR principles<a class="headerlink" href="#fair-principles" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/8-fair-principles.jpg"><img alt="../_images/8-fair-principles.jpg" src="../_images/8-fair-principles.jpg" style="width: 526.1999999999999px; height: 391.34999999999997px;" />
</a>
</figure>
<p>(This image was created by <a class="reference external" href="https://www.scriberia.com">Scriberia</a> for <a class="reference external" href="https://book.the-turing-way.org/">The
Turing Way</a> community and is used under a
CC-BY licence. The image was obtained from
<a class="reference external" href="https://zenodo.org/record/3332808">https://zenodo.org/record/3332808</a>)</p>
<p>“FAIR” is the current buzzword for data management. You may be asked
about it in, for example, making data management plans for grants:</p>
<ul class="simple">
<li><p>Findable</p>
<ul>
<li><p>Will anyone else know that your data exists?</p></li>
<li><p>Solutions: put it in a standard repository, or at least a
description of the data. Get a digital object identifier (DOI).</p></li>
</ul>
</li>
<li><p>Accessible</p>
<ul>
<li><p>Once someone knows that the data exists, can they get it?</p></li>
<li><p>Usually solved by being in a repository, but for non-open data,
may require more procedures.</p></li>
</ul>
</li>
<li><p>Interoperable</p>
<ul>
<li><p>Is your data in a format that can be used by others, like csv
instead of PDF?</p></li>
<li><p>Or better than csv. Example: <a class="reference external" href="https://5stardata.info/en/">5-star open data</a></p></li>
</ul>
</li>
<li><p>Reusable</p>
<ul>
<li><p>Is there a license allowing others to re-use?</p></li>
</ul>
</li>
</ul>
<p>Even though this is usually referred to as “open data”, it means
considering and making good decisions, even if non-open.</p>
<p>FAIR principles are usually discussed in the context of data,
but they apply also for research software.</p>
<p>Note that FAIR principles do not require data/software to be open.</p>
<div class="admonition-think-about-open-science-in-your-own-situation discussion important admonition" id="discussion-1">
<p class="admonition-title">Think about open science in your own situation</p>
<ul class="simple">
<li><p>Do you share any other research outputs besides published articles and possibly source code?</p></li>
<li><p>Is there any particular reason which stops you from sharing research data?</p></li>
</ul>
</div>
</section>
<section id="services-for-sharing-and-collaborating-on-research-data">
<h3>Services for sharing and collaborating on research data<a class="headerlink" href="#services-for-sharing-and-collaborating-on-research-data" title="Link to this heading"></a></h3>
<p>To find a research data repository for your data, you can search on the
<a class="reference external" href="https://www.re3data.org/">Registry of Research Data Repositories re3data</a>
platform and filter by country, content type, discipline, etc.</p>
<p><strong>International:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://zenodo.org/">Zenodo</a>: A general-purpose open access repository
created by OpenAIRE and CERN. Integration with GitHub, allows
researchers to upload files up to 50 GB.</p></li>
<li><p><a class="reference external" href="https://figshare.com/">Figshare</a>: Online digital repository where researchers
can preserve and share their research outputs (figures, datasets, images and videos).
Users can make all of their research outputs available in a citable,
shareable and discoverable manner.</p></li>
<li><p><a class="reference external" href="https://eudat.eu">EUDAT</a>: European platform for researchers and practitioners from any research discipline to preserve, find, access, and process data in a trusted environment.</p></li>
<li><p><a class="reference external" href="https://datadryad.org/">Dryad</a>: A general-purpose home for a wide diversity of datatypes,
governed by a nonprofit membership organization.
A curated resource that makes the data underlying scientific publications discoverable,
freely reusable, and citable.</p></li>
<li><p><a class="reference external" href="https://osf.io/">The Open Science Framework</a>: Gives free accounts for collaboration
around files and other research artifacts. Each account can have up to 5 GB of files
without any problem, and it remains private until you make it public.</p></li>
</ul>
<p><strong>Sweden:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.icos-sweden.se/">ICOS for climate data</a></p></li>
<li><p><a class="reference external" href="https://bolin.su.se/data/">Bolin center climate / geodata</a></p></li>
<li><p><a class="reference external" href="https://nbis.se/">NBIS for life science, sequence –omics data</a></p></li>
<li><p><a class="reference external" href="https://dataguru.lu.se/">DataGURU for environmental and climate data</a></p></li>
</ul>
</section>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading"></a></h2>
<div class="admonition-use-xarray-to-work-with-netcdf-files exercise important admonition" id="exercise-0">
<p class="admonition-title">Use Xarray to work with NetCDF files</p>
<p>This exercise is derived from <a class="reference external" href="https://tutorial.xarray.dev/intro.html">Xarray Tutorials</a>,
which is distributed under an Apache-2.0 License.</p>
<p>First create an Xarray dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>

<span class="n">ds1</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
        <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
    <span class="p">},</span>
    <span class="n">coords</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
        <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="n">ds2</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span>
        <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)),</span>
    <span class="p">},</span>
    <span class="n">coords</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
        <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
        <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Then write the datasets to disk using <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_netcdf()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds1</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s2">&quot;ds1.nc&quot;</span><span class="p">)</span>
<span class="n">ds2</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s2">&quot;ds2.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can read an individual file from disk by using <code class="xref py py-meth docutils literal notranslate"><span class="pre">open_dataset()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds3</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;ds1.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>or using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">load_dataset()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds4</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;ds1.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Tasks:</p>
<ul class="simple">
<li><p>Explore the hierarchical structure of the <code class="docutils literal notranslate"><span class="pre">ds1</span></code> and <code class="docutils literal notranslate"><span class="pre">ds2</span></code> datasets in a Jupyter notebook by typing the
variable names in a code cell and execute. Click the disk-looking objects on the right to expand the fields.</p></li>
<li><p>Explore <code class="docutils literal notranslate"><span class="pre">ds3</span></code> and <code class="docutils literal notranslate"><span class="pre">ds4</span></code> datasets, and compare them with <code class="docutils literal notranslate"><span class="pre">ds1</span></code>. What are the differences?</p></li>
</ul>
</div>
<div class="admonition-get-a-doi-by-connecting-your-repository-to-zenodo exercise important admonition" id="exercise-1">
<p class="admonition-title">Get a DOI by connecting your repository to Zenodo</p>
<p>Digital object identifiers (DOI) are the backbone of the academic
reference and metrics system. In this exercise you will see how to
make a GitHub repository citable by archiving it on the
<a class="reference external" href="https://about.zenodo.org/">Zenodo</a> archiving service. Zenodo is a
general-purpose open access repository created by OpenAIRE and CERN.</p>
<p>For this exercise you need to have a GitHub account and at least one public
repository that you can use for testing. If you need a new repository, you
can fork for example <a class="reference external" href="https://github.com/enccs/word-count-hpda">this one</a> (click the “fork” button
in the top right corner and fork it to your username).</p>
<ol class="arabic simple">
<li><p>Sign in to Zenodo using your GitHub account. For this exercise, use the
sandbox service: <a class="reference external" href="https://sandbox.zenodo.org/login/">https://sandbox.zenodo.org/login/</a>. This is a test version of the real Zenodo platform.</p></li>
<li><p>Go to <a class="reference external" href="https://sandbox.zenodo.org/account/settings/github/">https://sandbox.zenodo.org/account/settings/github/</a> and log in with your GitHub account.</p></li>
<li><p>Find the repository you wish to publish, and flip the switch to ON.</p></li>
<li><p>Go to GitHub and create a <strong>release</strong>  by clicking the <cite>Create a new release</cite> on the
right-hand side (a release is based on a Git tag, but is a higher-level GitHub feature).</p></li>
<li><p>Creating a new release will trigger Zenodo into archiving your repository,
and a DOI badge will be displayed next to your repository after a minute
or two.</p></li>
<li><p>You can include the DOI badge in your repository’s README file by clicking the
DOI badge and copy the relevant format (Markdown, RST, HTML).</p></li>
</ol>
</div>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://fair-software.eu/">Five recommendations for fair software</a></p></li>
<li><p><a class="reference external" href="https://github.com/the-turing-way/the-turing-way/">The Turing way</a></p></li>
</ul>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>File formats matter. For large datasets, use HDF5, NetCDF or similar.</p></li>
<li><p>The Xarray package provides high-level methods to work with data in NetCDF format.</p></li>
<li><p>Consider sharing other research outputs than articles. It is easy to mint DOIs and get cited!</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../motivation/" class="btn btn-neutral float-left" title="Motivation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../stack/" class="btn btn-neutral float-right" title="Efficient Array Computing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, ENCCS and individual contributors..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>